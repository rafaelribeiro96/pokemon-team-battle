<div class="pokemon-detail-container">
  <div class="navigation-buttons">
    <button
      class="nav-button"
      *ngIf="pokemon && pokemon.id > 1"
      (click)="navigateToPokemon(pokemon.id - 1)">
      &lsaquo; Previous
    </button>

    <button class="nav-button back" (click)="backToPokedex()">
      Back to Pokédex
    </button>

    <button
      class="nav-button"
      *ngIf="pokemon"
      (click)="navigateToPokemon(pokemon.id + 1)">
      Next &rsaquo;
    </button>
  </div>

  <div *ngIf="loading" class="loading-spinner">
    <div class="spinner"></div>
    <p>Loading Pokémon details...</p>
  </div>

  <div *ngIf="error" class="error-message">
    <p>{{ error }}</p>
    <button class="nav-button" (click)="backToPokedex()">
      Back to Pokédex
    </button>
  </div>

  <div *ngIf="!loading && !error && pokemon" class="pokemon-detail">
    <div class="pokemon-header">
      <div class="pokemon-id-name">
        <h1>{{ capitalizeFirstLetter(pokemon.name) }}</h1>
        <span class="pokemon-id">#{{ formatPokemonId(pokemon.id) }}</span>
      </div>

      <div class="pokemon-types">
        <span
          *ngFor="let type of pokemon.types"
          class="type-badge"
          [ngClass]="type.toLowerCase()">
          {{ capitalizeFirstLetter(type) }}
        </span>
      </div>
    </div>

    <div class="pokemon-content">
      <div class="pokemon-image-container">
        <img
          [src]="showShiny ? pokemon.sprites.other['official-artwork'].front_shiny : pokemon.sprites.other['official-artwork'].front_default"
          [alt]="pokemon.name"
          class="pokemon-image">

        <button class="shiny-toggle" (click)="toggleShiny()">
          {{ showShiny ? 'Show Normal' : 'Show Shiny' }}
        </button>
      </div>

      <div class="pokemon-info">
        <div class="info-section">
          <h2>About</h2>
          <div class="info-grid">
            <div class="info-item">
              <span class="info-label">Height</span>
              <span class="info-value">{{ pokemon.height }} m</span>
            </div>
            <div class="info-item">
              <span class="info-label">Weight</span>
              <span class="info-value">{{ pokemon.weight }} kg</span>
            </div>
          </div>
        </div>

        <div class="info-section">
          <h2>Abilities</h2>
          <div class="abilities-list">
            <span
              *ngFor="let ability of pokemon.abilities"
              class="ability-badge">
              {{ capitalizeFirstLetter(ability.replace('-', ' ')) }}
            </span>
          </div>
        </div>

        <div class="info-section">
          <h2>Base Stats</h2>
          <div class="stats-grid">
            <div class="stat-item">
              <div class="stat-label">HP</div>
              <div class="stat-value">{{ pokemon.stats.hp }}</div>
              <div class="stat-bar">
                <div
                  class="stat-fill"
                  [style.width.%]="getStatPercentage(pokemon.stats.hp)"
                  [style.background-color]="getStatColor(pokemon.stats.hp)">
                </div>
              </div>
            </div>

            <div class="stat-item">
              <div class="stat-label">Attack</div>
              <div class="stat-value">{{ pokemon.stats.attack }}</div>
              <div class="stat-bar">
                <div
                  class="stat-fill"
                  [style.width.%]="getStatPercentage(pokemon.stats.attack)"
                  [style.background-color]="getStatColor(pokemon.stats.attack)">
                </div>
              </div>
            </div>

            <div class="stat-item">
              <div class="stat-label">Defense</div>
              <div class="stat-value">{{ pokemon.stats.defense }}</div>
              <div class="stat-bar">
                <div
                  class="stat-fill"
                  [style.width.%]="getStatPercentage(pokemon.stats.defense)"
                  [style.background-color]="getStatColor(pokemon.stats.defense)">
                </div>
              </div>
            </div>

            <div class="stat-item">
              <div class="stat-label">Sp. Atk</div>
              <div class="stat-value">{{ pokemon.stats.specialAttack }}</div>
              <div class="stat-bar">
                <div
                  class="stat-fill"
                  [style.width.%]="getStatPercentage(pokemon.stats.specialAttack)"
                  [style.background-color]="getStatColor(pokemon.stats.specialAttack)">
                </div>
              </div>
            </div>

            <div class="stat-item">
              <div class="stat-label">Sp. Def</div>
              <div class="stat-value">{{ pokemon.stats.specialDefense }}</div>
              <div class="stat-bar">
                <div
                  class="stat-fill"
                  [style.width.%]="getStatPercentage(pokemon.stats.specialDefense)"
                  [style.background-color]="getStatColor(pokemon.stats.specialDefense)">
                </div>
              </div>
            </div>

            <div class="stat-item">
              <div class="stat-label">Speed</div>
              <div class="stat-value">{{ pokemon.stats.speed }}</div>
              <div class="stat-bar">
                <div
                  class="stat-fill"
                  [style.width.%]="getStatPercentage(pokemon.stats.speed)"
                  [style.background-color]="getStatColor(pokemon.stats.speed)">
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
