<div class="team-builder">
  <h2>Monte Seu Time</h2>
  <div class="team-actions">
    <button mat-raised-button color="primary" (click)="addRandomToTeam()">Escolha Aleatória</button>
    <button mat-raised-button color="accent" (click)="autoCompleteTeam()">Auto-Completar</button>
  </div>

  <h3>Time Atual</h3>
  <div class="team">
    <div *ngFor="let pokemon of team()" class="pokemon-card" [class.fainted]="pokemon.isFainted">
      <img [src]="pokemon.image" [alt]="pokemon.name" />
      <span>{{ pokemon.name }}</span>

      <div class="hp-bar">
        <div class="hp"
             [ngClass]="{
               'low': (pokemon.stats.hp / pokemon.stats.maxHp) <= 0.5 && (pokemon.stats.hp / pokemon.stats.maxHp) > 0.25,
               'critical': (pokemon.stats.hp / pokemon.stats.maxHp) <= 0.25
             }"
             [style.width.%]="(pokemon.stats.hp / pokemon.stats.maxHp) * 100"></div>
      </div>
      <div class="hp-text">
        {{ pokemon.stats.hp }} / {{ pokemon.stats.maxHp }}
      </div>

      <button mat-button color="warn" (click)="removePokemonFromTeam(pokemon)" [disabled]="battleInProgress">
        Remover
      </button>
    </div>
  </div>

  <h3 *ngIf="team().length < 6">Lista de Pokémon</h3>
  <app-pokemon-list
    *ngIf="team().length < 6"
    [pokemons]="availablePokemons()"
    (selectPokemon)="addPokemonToTeam($event)"
  ></app-pokemon-list>
</div>
