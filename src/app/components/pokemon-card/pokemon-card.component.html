<!-- pokemon-card.component.html -->
<div class="pokemon-card"
     [ngClass]="getCardClasses()"
     [@attackEffect]="attackEffectState"
     [id]="'pokemon-' + pokemon.id">
  <div class="status-icons">
    <app-pokemon-icon *ngIf="isStrongest" iconId="crown" size="sm"
                     [title]="'PokÃ©mon mais forte da batalha'"
                     [@iconAnimation]></app-pokemon-icon>

    <app-pokemon-icon *ngIf="justAttacked" iconId="fight" size="sm"
                     [title]="'Atacou recentemente'"
                     [@iconAnimation]></app-pokemon-icon>
  </div>

  <img [src]="pokemon.image" [alt]="pokemon.name" />
  <h4>{{ pokemon.name }}</h4>

  <div class="damage-indicator" [@damageEffect]="damageState" *ngIf="damageAmount > 0">
    -{{ damageAmount }}
  </div>

  <div class="super-effective" [@superEffectiveText]="superEffectiveState" *ngIf="isSuperEffective">
    SUPER EFETIVO!
  </div>

  <div class="type-badges">
    <span *ngFor="let type of pokemon.type" class="type-badge" [ngClass]="type.toLowerCase()">
      <app-pokemon-icon *ngIf="getTypeIcon(type)"
                       [iconId]="getTypeIcon(type) ?? null"
                       size="xs"></app-pokemon-icon>
      {{ type }}
    </span>
  </div>

  <div class="hp-bar">
    <div class="hp"
         [@hpChange]
         [ngClass]="{
           'low': (displayHp / pokemon.stats.maxHp) <= 0.5 && (displayHp / pokemon.stats.maxHp) > 0.25,
           'critical': (displayHp / pokemon.stats.maxHp) <= 0.25
         }"
         [style.width.%]="(displayHp / pokemon.stats.maxHp) * 100"></div>
  </div>
  <div class="hp-text">
    {{ displayHp > 0 ? Math.floor(displayHp) : 0 }} / {{ pokemon.stats.maxHp }}
  </div>

  <div class="attack-effect" *ngIf="isDefending"></div>
</div>
